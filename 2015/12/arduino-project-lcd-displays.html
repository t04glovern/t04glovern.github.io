<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>TwoFactor Assimilation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="http://t04glovern.github.io/js/jquery.min.js"></script>
  <script src="http://t04glovern.github.io/js/bootstrap.min.js"></script>
  <script src="http://t04glovern.github.io/js/header.js"></script>
  <script src="http://t04glovern.github.io/js/toc.js"></script>
  <link href="http://t04glovern.github.io/css/bootstrap.min.css" rel="stylesheet">
  <link href="http://t04glovern.github.io/css/theme.css" rel="stylesheet">
  <link href="http://t04glovern.github.io/css/syntax.css" rel="stylesheet">
  <link href="http://t04glovern.github.io/css/font-awesome/css/font-awesome.min.css" rel="stylesheet">
</head>

<body>

  
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-71336829-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


  


 <script type="text/javascript">
  WebFontConfig = {
    google: {
      families: ['Ubuntu::latin']
    }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://t04glovern.github.io/">TwoFactor Assimilation</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="http://t04glovern.github.io/">/home</a></li>
          <li><a href="http://t04glovern.github.io/archive.html">/archive</a></li>
          <li><a href="http://t04glovern.github.io/tags.html">/tags</a></li>
          <li><a href="http://t04glovern.github.io/about.html">/about</a></li>
        </ul>
      </div>
    </div>
  </nav>


<div class="wrapper">
  <div class="content">
    <div class="container container-center">
      <div class="row">
        <div class="col-md-8">
          <div class="article">
            <div class="well">
              <h1><a href="http://t04glovern.github.io/2015/12/arduino-project-lcd-displays">Arduino Project - LCD Displays</a></h1>
              <div class="post-meta">
                <div class="post-time">
                  <i class="fa fa-calendar"></i>
                  <time>22 Dec 2015</time>
                </div>
                <ul>
                  
                    <li><a href="http://t04glovern.github.io/tag/arduino">arduino</a></li>
                  
                    <li><a href="http://t04glovern.github.io/tag/electronics">electronics</a></li>
                  
                    <li><a href="http://t04glovern.github.io/tag/lcd">lcd</a></li>
                  
                </ul>
              </div>
              <div class="post-content">
                <div id="toc" class="toc"></div>
                <h1 id="introduction">Introduction</h1>

<p>I’ve had to use an <code>LCD display</code> a couple times with some projects in the past, but never really understood what I was doing as I followed tutorials telling me what to plug where. Today I decided I would go through and document what each pin does on a standard <code>16x2 LCD display</code> does and try to get it printing my Blogs title.</p>

<h1 id="the-pins">The Pins</h1>

<p>There are <code>16 pins</code> on a standard <code>2x16 LCD Display</code></p>

<p><img src="http://t04glovern.github.io/images/posts/arduino-lcd-pins.jpg" alt="LCD Display Pins" /></p>

<ol>
  <li><strong>Vss</strong>
    <ul>
      <li>This is the <code>Negative supply</code>; or the <code>ground pin</code>. It is excepted to be at 0V, so in almost every case you will just link this pin straight to your circuits <code>GND pin</code>.</li>
    </ul>
  </li>
  <li><strong>Vcc</strong>
    <ul>
      <li><code>Positive supply voltage</code>. This is the pin we use to power the main LCD module. There is a separate pin for the actual backlight (see pin 15-16).</li>
    </ul>
  </li>
  <li><strong>Vø</strong>
    <ul>
      <li>This is how we adjust the contrast of our display. Generally a <code>potentiometer</code> or any other device that will allow for variable settings</li>
    </ul>
  </li>
  <li><strong>RS</strong>
    <ul>
      <li><code>Register selector</code> allows us to toggle between the command and data registers</li>
      <li><code>Command Register</code> is selected with the RS Pin is Low. It tells the LCD that a command is being send to the display. Examples of commands could be Clear Display, Home Cursor, Entry Mode Set etc…</li>
      <li><code>Data Register</code> is the opposite and is selected with the RS Pin is High. It tells the LCD that the incoming stream is data that needs to be displayed.</li>
      <li>You will find that there is already a library that will do all the RS pin toggling for you, but it’s still good to understand the difference between the two. If you’d like to know more about some of the commands, there is a great tutorial on LCDs <a href="http://microcontrollerboard.com/lcd.html">Here</a>.</li>
    </ul>
  </li>
  <li><strong>R/W</strong>
    <ul>
      <li><code>Low to write</code> to the register; <code>High to read</code> from the register. There are some situations where you might want to read from the LCD display back into the program. It isn’t something that you will need to deal with often, but it’s another interesting thing to understand.</li>
    </ul>
  </li>
  <li><strong>E</strong>
    <ul>
      <li><code>Enabling pin</code>; when this pin is set to <code>logical low</code>, the LCD does not care what is happening with <code>R/W</code>, <code>RS</code>, and the <code>data bus lines</code>; when this pin is set to <code>logical high</code>, the LCD is processing the incoming data. It allows us to check if the LCD is still processing data that it has been given, so that we don’t write onto lines and corrupt our output.</li>
    </ul>
  </li>
  <li><strong>D0</strong>
    <ul>
      <li>8-bit data pin 0</li>
    </ul>
  </li>
  <li><strong>D1</strong>
    <ul>
      <li>8-bit data pin 1</li>
    </ul>
  </li>
  <li><strong>D2</strong>
    <ul>
      <li>8-bit data pin 2</li>
    </ul>
  </li>
  <li><strong>D3</strong>
    <ul>
      <li>8-bit data pin 3</li>
    </ul>
  </li>
  <li><strong>D4</strong>
    <ul>
      <li>8-bit data pin 4</li>
    </ul>
  </li>
  <li><strong>D5</strong>
    <ul>
      <li>8-bit data pin 5</li>
    </ul>
  </li>
  <li><strong>D6</strong>
    <ul>
      <li>8-bit data pin 6</li>
    </ul>
  </li>
  <li><strong>D7</strong>
    <ul>
      <li>8-bit data pin 7</li>
    </ul>
  </li>
  <li><strong>LED+</strong>
    <ul>
      <li><code>Backlight Vcc positive supply</code>. This pin powers the LCD backlight and normally runs at <code>5V</code></li>
    </ul>
  </li>
  <li><strong>LED-</strong>
    <ul>
      <li><code>Backlight GND negative supply</code>. This pin is the <code>GND</code> pin for the backlight. Expected to be <code>0V</code></li>
    </ul>
  </li>
</ol>

<h1 id="wire-up-the-lcd">Wire up the LCD</h1>

<p>Next I wired up the LCD using the following configurations.</p>

<figure class="highlight"><pre><code class="language-bat" data-lang="bat">LCD Pin <span class="m">1</span> -<span class="p">&gt;</span> <span class="n">GND</span>
LCD Pin <span class="m">2</span> -<span class="p">&gt;</span> <span class="n">5V</span>
LCD Pin <span class="m">3</span> -<span class="p">&gt;</span> <span class="n">Input</span> from potentiometer
LCD Pin <span class="m">4</span> -<span class="p">&gt;</span> <span class="n">Digital</span> Pin <span class="m">12</span>
LCD Pin <span class="m">5</span> -<span class="p">&gt;</span> <span class="n">Digital</span> Pin <span class="m">13</span>
LCD Pin <span class="m">6</span> -<span class="p">&gt;</span> <span class="n">Digital</span> Pin <span class="m">11</span>
LCD Pin <span class="m">7</span> -<span class="p">&gt;</span> <span class="n">Digital</span> Pin <span class="m">2</span>
LCD Pin <span class="m">8</span> -<span class="p">&gt;</span> <span class="n">Digital</span> Pin <span class="m">3</span>
LCD Pin <span class="m">9</span> -<span class="p">&gt;</span> <span class="n">Digital</span> Pin <span class="m">4</span>
LCD Pin <span class="m">10</span> -<span class="p">&gt;</span> <span class="n">Digital</span> Pin <span class="m">5</span>
LCD Pin <span class="m">11</span> -<span class="p">&gt;</span> <span class="n">Digital</span> Pin <span class="m">6</span>
LCD Pin <span class="m">12</span> -<span class="p">&gt;</span> <span class="n">Digital</span> Pin <span class="m">7</span>
LCD Pin <span class="m">13</span> -<span class="p">&gt;</span> <span class="n">Digital</span> Pin <span class="m">8</span>
LCD Pin <span class="m">14</span> -<span class="p">&gt;</span> <span class="n">Digital</span> Pin <span class="m">9</span>
LCD Pin <span class="m">15</span> -<span class="p">&gt;</span> <span class="n">220</span>Ω Resistor in series with <span class="m">5</span>V input
LCD Pin <span class="m">16</span> -<span class="p">&gt;</span> <span class="n">GND</span></code></pre></figure>

<p>Below is an example of how I wired it up. Yours might look completely different; especially with this many wires, it isn’t easy to keep things neat.</p>

<p><img src="http://t04glovern.github.io/images/posts/arduino-lcd-wired.jpg" alt="LCD Display Wired" /></p>

<h1 id="writing-the-code">Writing the Code</h1>

<p>To start with we’re going to want to define our <code>pin constants</code> as we’ll be referencing them a lot. Make sure you use logical naming conventions.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Map Register selector</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">lcd_RS</span> <span class="o">=</span> <span class="mi">12</span><span class="o">;</span>

<span class="c1">// Map Read/Write register</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">lcd_RW</span> <span class="o">=</span> <span class="mi">13</span><span class="o">;</span>

<span class="c1">// Map Enabling pin</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">lcd_E</span> <span class="o">=</span> <span class="mi">11</span><span class="o">;</span>

<span class="c1">// Map LCD Data Pins</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">lcd_D0</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="c1">// Data 0</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">lcd_D1</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span> <span class="c1">// Data 1</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">lcd_D2</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span> <span class="c1">// Data 2</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">lcd_D3</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="c1">// Data 3</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">lcd_D4</span> <span class="o">=</span> <span class="mi">6</span><span class="o">;</span> <span class="c1">// Data 4</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">lcd_D5</span> <span class="o">=</span> <span class="mi">7</span><span class="o">;</span> <span class="c1">// Data 5</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">lcd_D6</span> <span class="o">=</span> <span class="mi">8</span><span class="o">;</span> <span class="c1">// Data 6</span>
<span class="kd">const</span> <span class="kt">int</span> <span class="n">lcd_D7</span> <span class="o">=</span> <span class="mi">9</span><span class="o">;</span> <span class="c1">// Data 7</span></code></pre></figure>

<p>The next bit is tricky, we need to find a way to take all the various mapped pins and write out to them. Luckily there’s already libraries in place that we can use. For this example we’re just using the standard <code>LiquidCrystal</code> library; which can be imported into our project by adding the following to the top of the file.</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include &lt;LiquidCrystal.h&gt;</span></code></pre></figure>

<p>In order to access the functions within the <code>LiquidCrystal</code> library we just imported, we first need to create an <code>LCD object</code> that we can use to interact with various functions. I referred to the <a href="https://www.arduino.cc/en/Reference/LiquidCrystalConstructor">following</a> while trying to track down what the <code>default constructors</code> for the <code>LiquidCrystal object</code> were and found that I had four options.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">LiquidCrystal</span><span class="o">(</span><span class="n">rs</span><span class="o">,</span> <span class="n">enable</span><span class="o">,</span> <span class="n">d4</span><span class="o">,</span> <span class="n">d5</span><span class="o">,</span> <span class="n">d6</span><span class="o">,</span> <span class="n">d7</span><span class="o">)</span>
<span class="n">LiquidCrystal</span><span class="o">(</span><span class="n">rs</span><span class="o">,</span> <span class="n">rw</span><span class="o">,</span> <span class="n">enable</span><span class="o">,</span> <span class="n">d4</span><span class="o">,</span> <span class="n">d5</span><span class="o">,</span> <span class="n">d6</span><span class="o">,</span> <span class="n">d7</span><span class="o">)</span>
<span class="n">LiquidCrystal</span><span class="o">(</span><span class="n">rs</span><span class="o">,</span> <span class="n">enable</span><span class="o">,</span> <span class="n">d0</span><span class="o">,</span> <span class="n">d1</span><span class="o">,</span> <span class="n">d2</span><span class="o">,</span> <span class="n">d3</span><span class="o">,</span> <span class="n">d4</span><span class="o">,</span> <span class="n">d5</span><span class="o">,</span> <span class="n">d6</span><span class="o">,</span> <span class="n">d7</span><span class="o">)</span>
<span class="n">LiquidCrystal</span><span class="o">(</span><span class="n">rs</span><span class="o">,</span> <span class="n">rw</span><span class="o">,</span> <span class="n">enable</span><span class="o">,</span> <span class="n">d0</span><span class="o">,</span> <span class="n">d1</span><span class="o">,</span> <span class="n">d2</span><span class="o">,</span> <span class="n">d3</span><span class="o">,</span> <span class="n">d4</span><span class="o">,</span> <span class="n">d5</span><span class="o">,</span> <span class="n">d6</span><span class="o">,</span> <span class="n">d7</span><span class="o">)</span></code></pre></figure>

<p>What it meant was that I’d done more work then I needed to, as the LCD display can function with just four data pins, the select pin and enable. All those wires for nothing!</p>

<p><img src="http://t04glovern.github.io/images/posts/arduino-lcd-wires.jpg" alt="Futurama Wires" /></p>

<p>Since there’s no harm including all the inputs, I went ahead and used the <code>constructor</code> that required all inputs to be defined. The following code was added, ensuring I was referencing the constants I defined earlier on.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">LiquidCrystal</span> <span class="nf">lcd</span><span class="o">(</span><span class="n">lcd_RS</span><span class="o">,</span> <span class="n">lcd_RW</span><span class="o">,</span> <span class="n">lcd_E</span><span class="o">,</span>
  <span class="n">lcd_D0</span><span class="o">,</span> <span class="n">lcd_D1</span><span class="o">,</span> <span class="n">lcd_D2</span><span class="o">,</span> <span class="n">lcd_D3</span><span class="o">,</span> <span class="n">lcd_D4</span><span class="o">,</span> <span class="n">lcd_D5</span><span class="o">,</span> <span class="n">lcd_D6</span><span class="o">,</span> <span class="n">lcd_D7</span><span class="o">);</span></code></pre></figure>

<p>Now that I had an <code>LCD object</code> created, I could start accessing the <code>Functions</code> that are available as part of the <code>LiquidCrystal class</code></p>

<p>Documentation on the various Functions can be found <a href="https://www.arduino.cc/en/Reference/LiquidCrystal">here</a>, but the important ones I needed to start with were:</p>

<ol>
  <li>
    <p><a href="https://www.arduino.cc/en/Reference/LiquidCrystalBegin">begin()</a> - Initializes the interface to the LCD screen, and specifies the dimensions (width and height) of the display. begin() needs to be called before any other LCD library commands.</p>
  </li>
  <li>
    <p><a href="https://www.arduino.cc/en/Reference/LiquidCrystalPrint">print()</a> - Prints text to the LCD.</p>
  </li>
</ol>

<p>I added the following lines of code in order to Initialize the LCD and write out Hello, World to the screen. The parameters <code>lcd.begin()</code> takes are <code>lcd.begin(cols, rows)</code>.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">lcd</span><span class="o">.</span><span class="na">begin</span><span class="o">(</span><span class="mi">16</span><span class="o">,</span><span class="mi">2</span><span class="o">);</span>
<span class="n">lcd</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&quot;Hello, World!&quot;</span><span class="o">);</span></code></pre></figure>

<p>Compiled the code and loaded it onto the board….</p>

<p><img src="http://t04glovern.github.io/images/posts/arduino-lcd-helloworld.jpg" alt="Hello world" /></p>

<p>Sweet, that worked great! Lets try getting it to print out my blogs title</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">lcd</span><span class="o">.</span><span class="na">begin</span><span class="o">(</span><span class="mi">16</span><span class="o">,</span><span class="mi">2</span><span class="o">);</span>
<span class="n">lcd</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&quot;TwoFactor Assimilation&quot;</span><span class="o">);</span></code></pre></figure>

<p><img src="http://t04glovern.github.io/images/posts/arduino-lcd-twofactor-wrong.jpg" alt="Print blog title" /></p>

<p>Oh dear… That didn’t work how I’d hoped. The issue occurs because the LCD only has a particular number of slots it can write into per row. Because my blog title is longer than 16 characters we lose the portion of text that overflows.</p>

<p>This is where another function will come in handy</p>

<p><a href="https://www.arduino.cc/en/Reference/LiquidCrystalSetCursor">setCursor()</a> - Position the LCD cursor; that is, set the location at which subsequent text written to the LCD will be displayed.</p>

<p>This means that using the parameters <code>lcd.setCursor(col, row)</code> I can tell the board to move the position I’m writing in from down to the second row before printing <em>Assimilation</em>.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">lcd</span><span class="o">.</span><span class="na">begin</span><span class="o">(</span><span class="mi">16</span><span class="o">,</span><span class="mi">2</span><span class="o">);</span>
<span class="n">lcd</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&quot;TwoFactor&quot;</span><span class="o">);</span>
<span class="n">lcd</span><span class="o">.</span><span class="na">setCursor</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">);</span>
<span class="n">lcd</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">&quot;Assimilation&quot;</span><span class="o">);</span></code></pre></figure>

<p><img src="http://t04glovern.github.io/images/posts/arduino-lcd-twofactor-fixed.jpg" alt="Print blog title Fixed" /></p>

<p>And look at that, I can now read the entire name with no issues!</p>

<h1 id="conclusion">Conclusion</h1>

<p>There’s a tonne of things you can do with the <code>LiquidCrystal libraries</code>, so don’t yet this be all you do. Something interesting you could look into is having text centered (by moving the cursor around), or even having <a href="https://www.arduino.cc/en/Reference/LiquidCrystalAutoscroll">scrolling text</a>.</p>

<p>In the future I would like to use <code>LCDs</code> a lot more and spent a fair amount of time tonight reading up on the functions behind the pretty libraries.</p>

<p>If you’d like to learn more, check out <a href="http://microcontrollerboard.com/lcd.html">This</a> page I mentioned before. Either that or even <a href="http://matidavid.com/pic/LCD%20interfacing/lcd-programming.htm">this page</a> which goes into more depth of how the LCD works on an <code>assembler</code> level.</p>

              </div>
              
            </div>
          </div>
        </div>
        <div class="col-md-4 hidden-xs">
          <div class="sidebar ">
  <h1>Recent Posts</h1>
  <ul>
    
    <li><a href="/2015/12/arduino-project-lcd-displays">Arduino Project - LCD Displays</a></li>
    
    <li><a href="/2015/12/arduino-projects-thumbstick-to-rgb-led">Arduino Projects - Thumbstick to RGB LED</a></li>
    
    <li><a href="/2015/12/learning-aspnet-building-in-visual-studio-2015-part-3">Learning ASP.NET - Building in Visual Studio 2015 (Part 3)</a></li>
    
    <li><a href="/2015/12/learning-aspnet-using-vscode-and-yeoman-part-2">Learning ASP.NET - Using VScode and Yeoman (Part 2)</a></li>
    
    <li><a href="/2015/12/learning-aspnet-part-1">Learning ASP.NET - Installing ASP.NET Runtime (Part 1)</a></li>
    
  </ul>
</div>

<div class="sidebar">
  <h1>Tags</h1>
  <ul>
    
      <li><a href="/tag/node.js">node.js</a></li>
    
      <li><a href="/tag/bash">bash</a></li>
    
      <li><a href="/tag/script">script</a></li>
    
      <li><a href="/tag/asp.net">asp.net</a></li>
    
      <li><a href="/tag/windows">windows</a></li>
    
      <li><a href="/tag/yeoman">yeoman</a></li>
    
      <li><a href="/tag/vscode">vscode</a></li>
    
      <li><a href="/tag/visualstudio">visualstudio</a></li>
    
      <li><a href="/tag/arduino">arduino</a></li>
    
      <li><a href="/tag/electronics">electronics</a></li>
    
      <li><a href="/tag/lcd">lcd</a></li>
    
  </ul>
</div>

        </div>
      </div>
    </div>
    

  </div>
      <footer class="footer-distributed">
      <div class="container">
        <div class="footer">
          <p>Nathan Glover &copy; 2015</p>
          <h6>Follow me</h6>

<ul class="social-media">

  
    <li>
      <a title="t04glovern on Github" href="https://github.com/t04glovern" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    </li>
  

  
    <li>
      <a title="5443325 on StackOverflow" href="http://stackoverflow.com/users/5443325" target="_blank"><i class="fa fa-stack-overflow fa-2x"></i></a>
    </li>
  

  
    <li>
      <a title="t04glovern on LinkedIn" href="https://www.linkedin.com/in/glovernathan" target="_blank"><i class="fa fa-linkedin fa-2x"></i></a>
    </li>
  

  

  

  
    <li>
      <a title="feed.xml RSS" href="http://t04glovern.github.io/feed.xml" target="_blank"><i class="fa fa-rss fa-2x"></i></a>
    </li>
  

</ul>

        </div>
      </div>
    </footer>
  </body>
</html>

</div>
